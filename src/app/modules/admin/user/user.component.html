<div
  class="flex flex-col bg-[#26272F] text-center rounded-xl h-160 m-4 p-2 mr-0"
>
  <div class="w-24 p-1 mt-4 ng-tns-c42-0">
    <img src="assets/images/login/logoG.png" alt="Logo image" />
  </div>

  <a
    class="text-white hover:underline items-center pt-4 pb-4 bg-white/20"
    [routerLink]="['/user']"
  >
    <div class="flex justify-center">
      <div class="w-6">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <g
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
          >
            <path
              d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 0 0-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 0 0-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 0 0-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 0 0-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 0 0 1.066-2.573c-.94-1.543.826-3.31 2.37-2.37c.996.608 2.296.07 2.572-1.065Z"
            />
            <path d="M15 12a3 3 0 1 1-6 0a3 3 0 0 1 6 0Z" />
          </g>
        </svg>
      </div>
    </div>
    Settings
  </a>

  <a class="text-white hover:underline pt-4 pb-4" [routerLink]="['/live']">
    <div class="flex justify-center">
      <div class="w-6">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          fit=""
          height="100%"
          width="100%"
          preserveAspectRatio="xMidYMid meet"
          focusable="false"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m15 10l4.553-2.276A1 1 0 0 1 21 8.618v6.764a1 1 0 0 1-1.447.894L15 14M5 18h8a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2Z"
          />
        </svg>
      </div>
    </div>
    Live
  </a>

  <a
    class="text-white hover:underline items-center pt-4 pb-4"
    [routerLink]="['/playback']"
  >
    <div class="flex justify-center">
      <div class="w-6">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          fit=""
          height="100%"
          width="100%"
          preserveAspectRatio="xMidYMid meet"
          focusable="false"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"
          ></path>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          ></path>
        </svg>
      </div>
    </div>
    Playback
  </a>

  <a
    class="text-white hover:underline pt-4 pb-4"
    [routerLink]="['/viewnotifications']"
  >
    <div class="flex justify-center">
      <div class="w-6">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          fit=""
          height="100%"
          width="100%"
          preserveAspectRatio="xMidYMid meet"
          focusable="false"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
          ></path>
        </svg>
      </div>
    </div>
    Notifications
  </a>
</div>
<div
  class="sm:inset-0 flex flex-col flex-auto sm:overflow-hidden bg-card dark:bg-transparent"
>
  <!-- Header -->
  <span class="text-xl font-medium pl-8 pt-5">Welcome Guest!</span>
  <div
    class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-3 px-4 md:px-8"
  >
    <div>
      <div class="text-3xl font-medium tracking-tight leading-none">Users</div>
      <div class="ml-0.5 font-medium text-secondary">
        <ng-container *ngIf="userCount > 0">
          {{ userCount }}
        </ng-container>
        {{
          userCount
            | i18nPlural
              : {
                  "=0": "No User",
                  "=1": "User",
                  other: "User"
                }
        }}
      </div>
    </div>
    <div class="flex shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
      <!-- Search -->
      <mat-form-field
        class="fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded min-w-64"
      >
        <mat-icon
          class="icon-size-5"
          matPrefix
          [svgIcon]="'heroicons_solid:search'"
        ></mat-icon>
        <input
          matInput
          placeholder="Search User.."
          (keyup)="applyFilter($event)"
        />
      </mat-form-field>
      <!-- Add employee button -->
      <button
        class="ml-4"
        mat-flat-button
        color="accent"
        (click)="showPrompt()"
      >
        <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon
        ><span class="">Add</span>
      </button>
      <!-- Export  button -->
      <button class="ml-4" mat-flat-button color="accent" (click)="AddDevice()">
        <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon
        ><span class="">Add Device</span>
      </button>
    </div>
  </div>
  <div
    class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between px-4 md:px-8"
  >
    <div
      class="flex-col flex-auto shadow-md border-gray-200 border border-solid"
    >
      <table mat-table [dataSource]="dataSource" multiTemplateDataRows matSort>
        <div class="bg-card" title="Click for the device list">
          <ng-container matColumnDef="user_id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>User Id</th>
            <td mat-cell *matCellDef="let ele">
              <span>{{ ele.user_id }}</span>
            </td>
          </ng-container>
          <ng-container matColumnDef="user_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>User Name</th>
            <td mat-cell *matCellDef="let ele">
              {{ ele.user_name | titlecase }}
            </td>
          </ng-container>
          <ng-container matColumnDef="edgeunit">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Edge Unit</th>
            <td mat-cell *matCellDef="let ele">{{ ele.edgeunit }}</td>
          </ng-container>
          <ng-container matColumnDef="user_st_date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Start Date
            </th>
            <td mat-cell *matCellDef="let ele">
              <span>{{ ele.user_st_date }}</span>
            </td>
          </ng-container>
          <ng-container matColumnDef="tot_devices">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Total Devices
            </th>
            <td mat-cell *matCellDef="let ele">
              <span>{{ ele.tot_devices }}</span>
            </td>
          </ng-container>

          <!-- <ng-container matColumnDef="Add_User">
        <th mat-header-cell *matHeaderCellDef class="pr-0 bg-slate-50 border-b border-1 border-[#0B3960]"><span>
            <button mat-raised-button color="accent" (click)="showPrompt()">
            <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>Add User
          </button>
        </span>
       
    </ng-container>
    <ng-container matColumnDef="Add_Device">
        <th mat-header-cell *matHeaderCellDef class="pr-0 bg-slate-50 border-b border-1 border-[#0B3960]"> <span> <button mat-raised-button color="accent" (click)="AddDevice()">
            <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>Add Device
          </button>
        </span>
       
    </ng-container> -->

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Action</th>
            <td mat-cell *matCellDef="let ele" class="p-2">
              <!-- <button class="text-white bg-[#06294b] text-white  py-1 px-1 rounded w-20 h-7"  (click)="Edit()">
                    Edit
                  </button> -->
              <mat-icon
                matPrefix
                class="hidden sm:flex icon-size-5"
                [svgIcon]="'heroicons_outline:pencil'"
                (click)="EditUser(ele.user_id)"
              ></mat-icon></td
          ></ng-container>
        </div>

        <!-- Expanded Column -->
        <ng-container matColumnDef="expandedDetail">
          <td
            mat-cell
            *matCellDef="let element"
            [attr.colspan]="userColumns.length"
          >
            <div
              class="example-element-detail"
              [@detailExpand]="element.isExpanded ? 'expanded' : 'collapsed'"
            >
              <span
                class="expanded-contents"
                *ngIf="element.user_devices.length > 0; else nodata"
              >
                <tr
                  class="border-t border-b border-r border-l border-01 border-[#0B3960] grid grid-cols-12 gap-6"
                >
                  <th class="col-span-1">Device Id</th>
                  <th class="col-span-5">URL</th>
                  <th>Port</th>
                  <th class="col-span-2">Camera Type</th>
                  <th>Start Date</th>
                  <th>IP Address</th>
                  <th>Edit</th>
                </tr>
                <div
                  *ngFor="let devices of element.user_devices"
                  class="border-b border-r border-l border-01 border-[#0B3960]"
                >
                  <table mat-table>
                    <ng-container matColumnDef="device_id">
                      <td mat-header-cell *matHeaderCellDef class="col-span-1">
                        {{ devices.device_id }}
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="url">
                      <td
                        mat-header-cell
                        *matHeaderCellDef
                        class="text-clip overflow-hidden ..."
                        style="overflow: auto"
                        class="col-span-5"
                      >
                        {{ devices.url }}
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="port">
                      <td mat-header-cell *matHeaderCellDef>
                        {{ devices.port }}
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="camera_type">
                      <td mat-header-cell *matHeaderCellDef class="col-span-2">
                        {{ devices.camera_type }}
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="dev_st_date">
                      <td mat-header-cell *matHeaderCellDef>
                        {{ devices.dev_st_date }}
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="ip_address">
                      <td mat-header-cell *matHeaderCellDef>
                        {{ devices.ip_address }}
                      </td>
                    </ng-container>

                    <ng-container matColumnDef="edit">
                      <td mat-header-cell *matHeaderCellDef>
                        <mat-icon
                          matPrefix
                          class="hidden sm:flex icon-size-5"
                          [svgIcon]="'heroicons_outline:pencil'"
                          (click)="EditDevice(devices.device_id)"
                        >
                        </mat-icon>
                      </td>
                    </ng-container>
                    <tr
                      mat-header-row
                      *matHeaderRowDef="deviceColumns"
                      class="grid grid-cols-12 gap-6"
                    ></tr>
                    <tr
                      mat-row
                      *matRowDef="let row; columns: deviceColumns"
                    ></tr>
                  </table>
                </div>
              </span>
              <ng-template #nodata>
                <p class="font-bold">No Devices</p>
              </ng-template>
            </div>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="userColumns"></tr>
        <tr
          mat-row
          *matRowDef="let boss; columns: userColumns"
          class="example-element-row"
          [class.example-expanded-row]="boss.isExpanded"
          (click)="boss.isExpanded = !boss.isExpanded"
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: ['expandedDetail']"
          class="example-detail-row"
          style="display: contents"
        ></tr>
      </table>
      <mat-paginator
        #paginator
        [pageSizeOptions]="[10, 20, 50]"
        showFirstLastButtons
      ></mat-paginator>
    </div>
  </div>
</div>
