"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[64],{2064:(S,h,i)=>{i.r(h),i.d(h,{PlaybackModule:()=>Z});var x=i(2510),d=i(6895),n=i(4006),m=i(8277),u=i(3238),e=i(4650),b=i(1481),g=i(7009),C=i(6935),p=i(9602),f=i(9549),v=i(4144),y=i(3189);function k(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",20)(2,"video",21),e._UZ(3,"source",14),e._uU(4," Browser not supported "),e.qZA(),e.TgZ(5,"div",22),e._uU(6),e.TgZ(7,"button",23),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.playVideo(l.camera_type))}),e.TgZ(8,"button",24)(9,"div",25),e._UZ(10,"img",26),e.qZA()()()()()()}if(2&o){const t=r.$implicit,a=e.oxw();e.xp6(2),e.MGl("id","playbkvideo_",t.device_id,""),e.xp6(1),e.Q6J("src",a.cfurl+"media/"+t.camera_type+"/"+a.dateplay+"/output.m3u8",e.LSH),e.xp6(3),e.AsE(" ",t.camera_type," / ",t.port," ")}}const w={parse:{dateInput:"LL"},display:{dateInput:"dddd LL",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let M=(()=>{class o{constructor(t,a,s,l,c){this.sanitizer=t,this.datepipe=a,this._snackBar=s,this._StreamService=l,this.el=c,this.date=new n.NI("2023-08-17"),this.cfurl=localStorage.getItem("cfUrl"),this.isloading=!1,this.stream="",this.selectedDate=new Date("2023-08-17"),this.panelOpenState=!1,this.maxDate=new Date,this.toggle=!0,this.devicelist=[],this.overlayStyle={position:"absolute",top:"0",left:"0",width:"100%",fontSize:"24px",fontWeight:600,color:"#FFF",pointerEvents:"none",letterSpacing:"2px"},this.player=videojs.getPlayers(),this.player=!1,this.video=c.nativeElement,this.maxDate.setDate(this.selectedDate.getDate()-1)}ngOnInit(){const t={p_user_id:localStorage.getItem("userId"),p_device_token:"",p_device_type:"",p_port:"",login_user_id:localStorage.getItem("userId")};this._StreamService.getDeviceList(t).subscribe(a=>{if(this.devicelist=a.gai_get_device_list,null==this.devicelist)this.vdata={videolink:""},this.displayMsg("No devices found!");else{const s=this.devicelist[0].camera_type;this.dateplay=this.datepipe.transform(this.selectedDate,"yyyyMMdd"),this.isloading=!0,console.log(Object.keys(a.gai_get_device_list[0]).length),this.getPlayback(this.dateplay,s)}})}getPlayback(t,a){this.cameraType=a,this.toggle=!this.toggle,this.stream=this.cfurl+"media/"+a+"/"+t+"/output.m3u8",this.vdata={videolink:this.stream},console.log(this.stream),this.player.src({}),this.player.src({src:this.stream}),this.player.controls(!0)}sanitize(t){return this.sanitizer.bypassSecurityTrustUrl(t)}displayMsg(t){this._snackBar.open(t,"OK",{duration:1200,verticalPosition:"top",horizontalPosition:"center"})}ngAfterViewInit(){this.player=videojs(document.getElementById("smvideo")),this.devicelist.map(function(t,a){videojs(document.getElementById("playbkvideo_"+t.device_id)),document.getElementById("playbkvideo_"+t.device_id).style.height="130px"}),this.player.muted(!0),this.player.on("timeupdate",()=>{this.player.controls(!0)})}valueChanged(t){this.selectedDate=t.format("YYYYMMDD"),this.getPlayback(this.selectedDate,this.cameraType)}playVideo(t){const a=t;this.cameraType=a,this.getPlayback(this.dateplay,a)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.H7),e.Y36(d.uU),e.Y36(g.ux),e.Y36(C.G),e.Y36(e.SBq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-playback"]],features:[e._Bn([{provide:u._A,useClass:m.t7,deps:[u.Ad,m.o8]},{provide:d.uU},{provide:u.sG,useValue:w}])],decls:24,vars:11,consts:[[1,"flex","flex-col","sm:flex-row","items-center","md:items-start","sm:justify-center","md:justify-start","flex-auto","min-w-0","mr-4"],[1,"md:flex","md:justify-start","w-full","sm:w-5/6","md:h-100","md:w-5/6","pb-8","px-4","sm:p-10","md:px-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","max-w-full","sm:w-full","mx-auto","sm:mx-0"],[1,"mr-auto","ml-auto","sm:h-1/2","md:h-1/2",2,"background-image","url('assets/images/logo/bgvd.png')","background-repeat","no-repeat","width","50%","background-size","contain","height","60px !important","align-items","center"],[1,"flex","text-white","justify-center"],[1,"p-6"],[1,"w-100","h-4","flex","justify-center"],["matSuffix","",2,"margin-top","-10px","color","rgba(238, 231, 231, 0.932)",3,"for"],["matInput","","required","","placeholder","Choose a date",2,"margin-top","2px",3,"matDatepicker","formControl","dateChange"],["datepicker",""],[1,"flex-col","sm:w-full","md:w-full","lg:w-full"],[2,"box-shadow","0px 16px 0px #9ca3af","border-radius","40px"],[2,"box-shadow","0px 9px 0px #6b7280","border-radius","30px"],["id","smvideo","controls","","autoplay","",1,"video-js","vjs-default-skin","sm:w-full","md:w-full","lg:w-full",2,"height","65vh","border-radius","20px"],["type","application/x-mpegURL",3,"src"],["id","text-overlay",1,"text-overlay",3,"ngStyle"],[1,"relative","flex-auto","justify-center","w-1/6","h-full","overflow-scroll","dark:border-l","mt-6"],["type","search","id","default-search","type","text","name","search","autocomplete","off","placeholder","Search Cameras","required","",1,"block","w-full","p-4","py-4","text-sm","text-gray-900","text-center","rounded","bg-gray-200","h-3.5",3,"ngModel","ngModelChange"],[1,"mt-12","h-3/4","overflow-scroll"],[4,"ngFor","ngForOf"],[1,"grid-cols-1","w-full"],["data-setup",'{"liveui": true}',"autoplay","",1,"video-js","vjs-default-skin","sm:w-full","md:w-full","lg:w-full",2,"border-radius","20px",3,"id"],[1,"text-[12px]","pl-1","text-white","w-full","playdiv","bg-[#26272F]","my-1","p-2"],[1,"btn","btn-warning",2,"float","right","margin-top","-4px",3,"click"],["title","Click Here",1,"w-7","h-7","rounded-full","focus:outline-none"],[1,"w-full"],["src","assets/images/logo/button.png"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"mat-datepicker-toggle",7),e.TgZ(8,"input",8),e.NdJ("dateChange",function(l){return a.valueChanged(l.value)}),e.qZA(),e._UZ(9,"mat-datepicker",null,9),e.qZA()()()(),e.TgZ(11,"div",10)(12,"div",11)(13,"div",12)(14,"video",13),e._UZ(15,"source",14),e._uU(16," Browser not supported "),e.qZA(),e.TgZ(17,"div",15),e._uU(18),e.qZA()()()()()(),e.TgZ(19,"div",16)(20,"input",17),e.NdJ("ngModelChange",function(l){return a.searchText=l}),e.qZA(),e.TgZ(21,"div",18),e.YNc(22,k,11,4,"div",19),e.ALo(23,"filter"),e.qZA()()()),2&t){const s=e.MAs(10);e.xp6(7),e.Q6J("for",s),e.xp6(1),e.Q6J("matDatepicker",s)("formControl",a.date),e.xp6(7),e.Q6J("src",a.sanitize(a.vdata.videolink),e.LSH),e.xp6(2),e.Q6J("ngStyle",a.overlayStyle),e.xp6(1),e.hij(" ",a.cameraType," "),e.xp6(2),e.Q6J("ngModel",a.searchText),e.xp6(2),e.Q6J("ngForOf",e.xi3(23,8,a.devicelist,a.searchText))}},dependencies:[d.sg,d.PC,n.Fj,n.JJ,n.Q7,n.oH,n.On,p.Mq,p.hl,p.nW,f.R9,v.Nt,y.Z],styles:["video[_ngcontent-%COMP%]{object-fit:fill}.mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding-right:80px}.a[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{width:30px;height:17px}input[_ngcontent-%COMP%]{color-scheme:dark;padding-right:50px}.mat-icon-button[_ngcontent-%COMP%]{padding-top:10px!important}.vjs-big-play-button[_ngcontent-%COMP%]{display:none!important}.text-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;padding-top:120px;padding-left:80px;font-weight:100px;pointer-events:none}"]}),o})();var P=i(1572);const T=[{path:"",component:M}];let Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[x.Bz.forChild(T),d.ez,y.h,m.Yd,n.UX,g.ZX,n.u5,P.Cq,p.FA,f.lN,v.c]}),o})()}}]);