"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[64],{2064:(M,m,i)=>{i.r(m),i.d(m,{PlaybackModule:()=>T});var y=i(2510),r=i(6895),n=i(4006),c=i(8277),u=i(3238),e=i(4650),b=i(1481),g=i(7009),x=i(6935),d=i(9602),h=i(9549),v=i(4144);const _={parse:{dateInput:"LL"},display:{dateInput:"dddd LL",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let Z=(()=>{class o{constructor(t,a,s,l,f){this.sanitizer=t,this.datepipe=a,this._snackBar=s,this._StreamService=l,this.el=f,this.date=new n.NI("2023-08-17"),this.cfurl=localStorage.getItem("cfUrl"),this.isloading=!1,this.stream="",this.selectedDate=new Date("2023-08-17"),this.panelOpenState=!1,this.maxDate=new Date,this.toggle=!0,this.devicelist=[],this.overlayStyle={position:"absolute",top:"0",left:"0",width:"100%",fontSize:"24px",fontWeight:600,color:"#FFF",pointerEvents:"none",letterSpacing:"2px"},this.player=videojs.getPlayers(),this.player=!1,this.video=f.nativeElement,this.maxDate.setDate(this.selectedDate.getDate()-1)}ngOnInit(){const t={p_user_id:localStorage.getItem("userId"),p_device_token:"",p_device_type:"",p_port:"",login_user_id:localStorage.getItem("userId")};this._StreamService.getDeviceList(t).subscribe(a=>{if(this.devicelist=a.gai_get_device_list,null==this.devicelist)this.vdata={videolink:""},this.displayMsg("No devices found!");else{const s=this.devicelist[0].camera_type;this.dateplay=this.datepipe.transform(this.selectedDate,"yyyyMMdd"),this.isloading=!0,console.log(Object.keys(a.gai_get_device_list[0]).length),this.getPlayback(this.dateplay,s)}})}getPlayback(t,a){this.cameraType=a,this.toggle=!this.toggle,this.stream=this.cfurl+"media/"+a+"/"+t+"/output.m3u8",this.vdata={videolink:this.stream},console.log(this.stream),this.player.src({}),this.player.src({src:this.stream}),this.player.controls(!0)}sanitize(t){return this.sanitizer.bypassSecurityTrustUrl(t)}displayMsg(t){this._snackBar.open(t,"OK",{duration:1200,verticalPosition:"top",horizontalPosition:"center"})}ngAfterViewInit(){this.player=videojs(document.getElementById("smvideo")),this.devicelist.map(function(t,a){videojs(document.getElementById("playbkvideo_"+t.device_id)),document.getElementById("playbkvideo_"+t.device_id).style.height="130px"}),this.player.muted(!0),this.player.on("timeupdate",()=>{this.player.controls(!0)})}valueChanged(t){this.selectedDate=t.format("YYYYMMDD"),this.getPlayback(this.selectedDate,this.cameraType)}playVideo(t){const a=t;this.cameraType=a,this.getPlayback(this.dateplay,a)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.H7),e.Y36(r.uU),e.Y36(g.ux),e.Y36(x.G),e.Y36(e.SBq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-playback"]],features:[e._Bn([{provide:u._A,useClass:c.t7,deps:[u.Ad,c.o8]},{provide:r.uU},{provide:u.sG,useValue:_}])],decls:63,vars:6,consts:[[1,"flex","flex-col","sm:flex-row","items-center","md:items-start","sm:justify-center","md:justify-start","flex-auto","min-w-0","mr-4"],[1,"md:flex","md:justify-start","w-full","sm:w-5/6","md:h-100","md:w-5/6","pb-8","px-4","sm:p-10","md:px-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","max-w-full","sm:w-full","mx-auto","sm:mx-0"],[1,"mr-auto","ml-auto","sm:h-1/2","md:h-1/2",2,"background-image","url('assets/images/logo/bgvd.png')","background-repeat","no-repeat","width","50%","background-size","contain","height","60px !important","align-items","center"],[1,"flex","text-white","justify-center"],[1,"p-6"],[1,"w-100","h-4","flex","justify-center"],["matSuffix","",2,"margin-top","-10px","color","rgba(238, 231, 231, 0.932)",3,"for"],["matInput","","required","","placeholder","Choose a date",2,"margin-top","2px",3,"matDatepicker","formControl","dateChange"],["datepicker",""],[1,"flex-col","sm:w-full","md:w-full","lg:w-full"],[2,"box-shadow","0px 16px 0px #9ca3af","border-radius","40px"],[2,"box-shadow","0px 9px 0px #6b7280","border-radius","30px"],["controls","","autoplay","",1,"video-js","vjs-default-skin","sm:w-full","md:w-full","lg:w-full",2,"height","65vh","border-radius","20px"],["src","assets/demo-videos/cashier22_20230608_16_23_47_713_theft.mp4","type","video/mp4"],["id","text-overlay",1,"text-overlay",3,"ngStyle"],[1,"relative","flex-auto","justify-center","w-1/6","h-full","overflow-scroll","dark:border-l","mt-6"],["type","search","id","default-search","type","text","name","search","autocomplete","off","placeholder","Search Cameras","required","",1,"block","w-full","p-4","py-4","text-sm","text-gray-900","text-center","rounded","bg-gray-200","h-3.5",3,"ngModel","ngModelChange"],[1,"mt-12","h-3/4","overflow-scroll"],[1,"grid-cols-1","w-full"],["data-setup",'{"liveui": true}',"id","playbkvideo_1",1,"video-js","vjs-default-skin","sm:w-full","md:w-full","lg:w-full",2,"border-radius","20px"],["src","assets/demo-videos/cashier22_20230608_16_22_54_616_theft.mp4","type","video/mp4"],[1,"text-[12px]","pl-1","text-white","w-full","playdiv","bg-[#26272F]","my-1","p-2"],[1,"btn","btn-warning",2,"float","right","margin-top","-4px",3,"click"],["title","Click Here",1,"w-7","h-7","rounded-full","focus:outline-none"],[1,"w-full"],["src","assets/images/logo/button.png"],["src","assets/demo-videos/cashier22_20230608_16_23_19_671_theft.mp4","type","video/mp4"],["src","assets/demo-videos/cashier22_20230608_16_24_11_246_theft.mp4","type","video/mp4"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"mat-datepicker-toggle",7),e.TgZ(8,"input",8),e.NdJ("dateChange",function(l){return a.valueChanged(l.value)}),e.qZA(),e._UZ(9,"mat-datepicker",null,9),e.qZA()()()(),e.TgZ(11,"div",10)(12,"div",11)(13,"div",12)(14,"video",13),e._UZ(15,"source",14),e._uU(16," Browser not supported "),e.qZA(),e.TgZ(17,"div",15),e._uU(18),e.qZA()()()()()(),e.TgZ(19,"div",16)(20,"input",17),e.NdJ("ngModelChange",function(l){return a.searchText=l}),e.qZA(),e.TgZ(21,"div",18)(22,"div")(23,"div",19)(24,"video",20),e._UZ(25,"source",21),e._uU(26," Browser not supported "),e.qZA(),e.TgZ(27,"div",22),e._uU(28," Camera 2 / Port 554 "),e.TgZ(29,"button",23),e.NdJ("click",function(){return a.playVideo(1)}),e.TgZ(30,"button",24)(31,"div",25),e._UZ(32,"img",26),e.qZA()()()()(),e.TgZ(33,"div",19)(34,"video",20),e._UZ(35,"source",27),e._uU(36," Browser not supported "),e.qZA(),e.TgZ(37,"div",22),e._uU(38," Camera 2 / Port 554 "),e.TgZ(39,"button",23),e.NdJ("click",function(){return a.playVideo(1)}),e.TgZ(40,"button",24)(41,"div",25),e._UZ(42,"img",26),e.qZA()()()()(),e.TgZ(43,"div",19)(44,"video",20),e._UZ(45,"source",14),e._uU(46," Browser not supported "),e.qZA(),e.TgZ(47,"div",22),e._uU(48," Camera 2 / Port 554 "),e.TgZ(49,"button",23),e.NdJ("click",function(){return a.playVideo(1)}),e.TgZ(50,"button",24)(51,"div",25),e._UZ(52,"img",26),e.qZA()()()()(),e.TgZ(53,"div",19)(54,"video",20),e._UZ(55,"source",28),e._uU(56," Browser not supported "),e.qZA(),e.TgZ(57,"div",22),e._uU(58," Camera 2 / Port 554 "),e.TgZ(59,"button",23),e.NdJ("click",function(){return a.playVideo(1)}),e.TgZ(60,"button",24)(61,"div",25),e._UZ(62,"img",26),e.qZA()()()()()()()()()),2&t){const s=e.MAs(10);e.xp6(7),e.Q6J("for",s),e.xp6(1),e.Q6J("matDatepicker",s)("formControl",a.date),e.xp6(9),e.Q6J("ngStyle",a.overlayStyle),e.xp6(1),e.hij(" ",a.cameraType," "),e.xp6(2),e.Q6J("ngModel",a.searchText)}},dependencies:[r.PC,n.Fj,n.JJ,n.Q7,n.oH,n.On,d.Mq,d.hl,d.nW,h.R9,v.Nt],styles:["video[_ngcontent-%COMP%]{object-fit:fill}.mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding-right:80px}.a[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{width:30px;height:17px}input[_ngcontent-%COMP%]{color-scheme:dark;padding-right:50px}.mat-icon-button[_ngcontent-%COMP%]{padding-top:10px!important}.vjs-big-play-button[_ngcontent-%COMP%]{display:none!important}.text-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;padding-top:120px;padding-left:80px;font-weight:100px;pointer-events:none}"]}),o})();var k=i(3189),C=i(1572);const w=[{path:"",component:Z}];let T=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[y.Bz.forChild(w),r.ez,k.h,c.Yd,n.UX,g.ZX,n.u5,C.Cq,d.FA,h.lN,v.c]}),o})()}}]);